<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Offre – Immo Hoessen</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="site">
  <header class="header">
    <div class="header-inner">
      <div class="brand">
        <img src="img/logo.svg" alt="Immo Hoessen">
        <span class="brand-name">Immo Hoessen</span>
      </div>
      <nav class="nav">
        <a href="index.html">Accueil</a>
        <a href="gestion.html">Types de gestion</a>
        <a href="portail.html">Portail</a>
        <a href="contacts.html">Contacts</a>
        <a href="apropos.html">À propos</a>
        <a class="active" href="offre.html">Offre</a>
      </nav>
    </div>
  </header>

  <main class="container pb-6">
    <h1>Offre</h1>
    <p class="mt-1">Preencha o formulário abaixo para solicitar uma proposta.</p>

    <form id="offreForm" class="form card mt-3" novalidate>
      <div class="form-grid">
        <div class="form-field">
          <label for="nome">Nome <span class="req">*</span></label>
          <input type="text" id="nome" name="Nome" required>
          <small class="err">Campo obrigatório</small>
        </div>

        <div class="form-field">
          <label for="email">Email <span class="req">*</span></label>
          <input type="email" id="email" name="Email" required>
          <small class="err">Informe um e-mail válido</small>
        </div>

        <div class="form-field">
          <label for="telefone">Telefone</label>
          <input type="tel" id="telefone" name="Telefone" placeholder="+32 ...">
        </div>

        <div class="form-field">
          <label for="endereco">Endereço da copropriedade <span class="req">*</span></label>
          <input type="text" id="endereco" name="Endereço da copropriedade" required>
          <small class="err">Campo obrigatório</small>
        </div>

        <div class="form-field">
          <label for="andares">Número de andares <span class="req">*</span></label>
          <input type="number" id="andares" name="Número de andares" min="1" step="1" required>
          <small class="err">Informe um número válido</small>
        </div>

        <div class="form-field">
          <label for="garagem">Garagem / emplacement</label>
          <select id="garagem" name="Garagem/Emplacement">
            <option value="">Selecionar…</option>
            <option>Sim</option>
            <option>Não</option>
          </select>
        </div>

        <div class="form-field">
          <label for="temSyndic">Você já tem um syndic?</label>
          <select id="temSyndic" name="Já possui syndic?">
            <option value="">Selecionar…</option>
            <option>Sim</option>
            <option>Não</option>
            <option>Não sei</option>
          </select>
        </div>

        <div class="form-field form-span">
          <label for="mensagem">Mensagem (opcional)</label>
          <textarea id="mensagem" name="Mensagem" rows="5" placeholder="Escreva sua mensagem..."></textarea>
        </div>
      </div>

      <div class="mt-3">
        <button type="submit" class="btn">Enviar</button>
        <p class="form-note mt-1">Os campos marcados com <span class="req">*</span> são obrigatórios.</p>
      </div>

      <div id="formSuccess" class="form-success" role="status" aria-live="polite" hidden>
        Merci pour seu interesse — entraremos em contato o mais breve possível.
      </div>
    </form>
  </main>

  <footer>
    <div class="footer-inner">
      <div>Avenue Heydenberg 14, 1200 Bruxelles · Tél. <a href="tel:+3227725175">02 772 51 75</a> · BE0462920325</div>
      <div>Heures: 09:00–13:00 · <a href="mentions.html">Mentions légales</a></div>
    </div>
  </footer>

  <script>
    (function () {
      const form = document.getElementById('offreForm');
      const success = document.getElementById('formSuccess');

      function encodeBody(data) {
        // monta corpo em texto simples
        return Object.entries(data)
          .map(([k,v]) => `${k}: ${v}`)
          .join('\\n');
      }

      form.addEventListener('submit', function (e) {
        e.preventDefault();
        success.hidden = true;

        // validação simples
        let valid = true;
        form.querySelectorAll('[required]').forEach(el => {
          const fieldWrap = el.closest('.form-field');
          if (!el.value.trim() || (el.type === 'email' && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(el.value))) {
            valid = false;
            fieldWrap.classList.add('invalid');
          } else {
            fieldWrap.classList.remove('invalid');
          }
        });
        if (!valid) {
          form.querySelector('.invalid input, .invalid textarea')?.focus();
          return;
        }

        // coleta dados
        const data = {
          'Nome': form.nome.value.trim(),
          'Email': form.email.value.trim(),
          'Telefone': form.telefone.value.trim(),
          'Endereço da copropriedade': form.endereco.value.trim(),
          'Número de andares': form.andares.value.trim(),
          'Garagem/Emplacement': form.garagem.value || '—',
          'Já possui syndic?': form.temSyndic.value || '—',
          'Mensagem': form.mensagem.value.trim() || '—'
        };

        // envia via mailto (GitHub Pages não tem backend)
        const subject = encodeURIComponent('Demande d\\'offre via site');
        const body = encodeURIComponent(encodeBody(data));
        const mailto = `mailto:syndic@immohoessen.be?subject=${subject}&body=${body}`;

        // abre cliente de e-mail do usuário
        window.location.href = mailto;

        // mostra confirmação na página
        success.hidden = false;
        form.reset();
      });

      // remove marcação de erro ao digitar
      form.addEventListener('input', (e) => {
        const wrap = e.target.closest('.form-field');
        wrap && wrap.classList.remove('invalid');
      });
    })();
  </script>
</body>
</html>
